/* ── Memory Gallery: 3D floating images around a central logo ── */

.mg-scene {
  position: fixed;
  inset: 0;
  z-index: 1;
  overflow: hidden;
}

/* 3D perspective container */
.mg-space {
  position: absolute;
  inset: 0;
  perspective: 1200px;
  perspective-origin: 50% 50%;
  transition: opacity 0.5s ease;
}

.mg-space--dimmed {
  opacity: 0;
  pointer-events: none;
}

/* ── Central logo ── */

.mg-logo {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  z-index: 1;

  /* Reset button chrome */
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  cursor: pointer;

  animation: mg-logo-in 1s ease-out forwards;
  opacity: 0;
  transition: transform 0.3s ease;
}

.mg-logo:hover {
  transform: translate(-50%, -50%) scale(1.06);
}

.mg-logo:focus-visible {
  outline: 2px solid rgba(210, 170, 110, 0.5);
  outline-offset: 8px;
  border-radius: 6px;
}

@keyframes mg-logo-in {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.7); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

.mg-logo__text {
  font-family: "Cinzel", serif;
  font-size: clamp(24px, 5vmin, 52px);
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: rgba(210, 170, 110, 0.75);
  text-shadow:
    0 0 20px rgba(210, 170, 110, 0.3),
    0 0 60px rgba(210, 170, 110, 0.1);
}

.mg-logo__sub {
  font-family: "Cinzel", serif;
  font-size: clamp(14px, 2.5vmin, 28px);
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: rgba(210, 170, 110, 0.45);
  margin-top: clamp(2px, 0.5vmin, 6px);
}


/* ── Floating card (button wrapper) ── */

.mg-card {
  position: absolute;
  /* All cards anchor at center — scatter via transform only */
  top: 50%;
  left: 50%;
  border: none;
  padding: 0;
  margin: 0;
  background: none;
  cursor: pointer;
  transform-style: preserve-3d;
  opacity: 0;
}

.mg-card:hover {
  z-index: 10;
}

.mg-card:focus-visible {
  outline: 2px solid rgba(210, 170, 110, 0.6);
  outline-offset: 4px;
  border-radius: 8px;
}

/* Card image */
.mg-card__img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6),
              0 0 1px rgba(210, 170, 110, 0.3);
  pointer-events: none;
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  /* Soft vignette — edges dissolve into the nebula */
  -webkit-mask-image: radial-gradient(ellipse, black 55%, transparent 100%);
  mask-image: radial-gradient(ellipse, black 55%, transparent 100%);
}

.mg-card:hover .mg-card__img {
  transform: scale(1.05);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.7),
              0 0 12px rgba(210, 170, 110, 0.2);
}


/* ── Card positions: radiate outward from centre ──
   All cards sit at top:50% left:50%, positioned via transform.
   10 slots arranged in two rings to avoid crowding the central logo.
   Portrait/landscape overrides adjust the scatter axis. */

/* Base card size — smaller to fit 10 comfortably */
.mg-card--0, .mg-card--1, .mg-card--2, .mg-card--3, .mg-card--4,
.mg-card--5, .mg-card--6, .mg-card--7, .mg-card--8, .mg-card--9 {
  width: clamp(80px, 15vmin, 180px);
  height: clamp(60px, 11vmin, 135px);
}

/* Resting transforms — two rings, all clear of centre logo */
/* Ring 1 (inner, 4 cards): moderate distance, shallower Z */
.mg-card--0 { --rest: translate(calc(-50% - 28vw), calc(-50% - 18vh)) translate3d(0,0,-60px) rotateY(-7deg) rotateX(3deg); }
.mg-card--1 { --rest: translate(calc(-50% + 28vw), calc(-50% - 18vh)) translate3d(0,0,-100px) rotateY(9deg) rotateX(-3deg); }
.mg-card--2 { --rest: translate(calc(-50% - 26vw), calc(-50% + 20vh)) translate3d(0,0,-80px) rotateY(-5deg) rotateX(5deg); }
.mg-card--3 { --rest: translate(calc(-50% + 26vw), calc(-50% + 20vh)) translate3d(0,0,-120px) rotateY(7deg) rotateX(-4deg); }

/* Ring 2 (outer, 6 cards): pushed further out, deeper Z */
.mg-card--4 { --rest: translate(calc(-50% - 38vw), calc(-50% - 4vh))  translate3d(0,0,-180px) rotateY(-10deg) rotateX(2deg); }
.mg-card--5 { --rest: translate(calc(-50% + 38vw), calc(-50% - 4vh))  translate3d(0,0,-220px) rotateY(10deg) rotateX(-2deg); }
.mg-card--6 { --rest: translate(calc(-50% - 8vw),  calc(-50% - 38vh)) translate3d(0,0,-260px) rotateY(-4deg) rotateX(8deg); }
.mg-card--7 { --rest: translate(calc(-50% + 10vw), calc(-50% + 38vh)) translate3d(0,0,-300px) rotateY(6deg) rotateX(-7deg); }
.mg-card--8 { --rest: translate(calc(-50% - 34vw), calc(-50% + 34vh)) translate3d(0,0,-240px) rotateY(-8deg) rotateX(5deg); }
.mg-card--9 { --rest: translate(calc(-50% + 34vw), calc(-50% - 34vh)) translate3d(0,0,-280px) rotateY(8deg) rotateX(-5deg); }

/* ── Portrait: stretch vertical spread, pull horizontal in ── */
@media (orientation: portrait) {
  .mg-card--0 { --rest: translate(calc(-50% - 22vw), calc(-50% - 22vh)) translate3d(0,0,-60px) rotateY(-7deg) rotateX(3deg); }
  .mg-card--1 { --rest: translate(calc(-50% + 22vw), calc(-50% - 22vh)) translate3d(0,0,-100px) rotateY(9deg) rotateX(-3deg); }
  .mg-card--2 { --rest: translate(calc(-50% - 20vw), calc(-50% + 24vh)) translate3d(0,0,-80px) rotateY(-5deg) rotateX(5deg); }
  .mg-card--3 { --rest: translate(calc(-50% + 20vw), calc(-50% + 24vh)) translate3d(0,0,-120px) rotateY(7deg) rotateX(-4deg); }
  .mg-card--4 { --rest: translate(calc(-50% - 30vw), calc(-50% - 6vh))  translate3d(0,0,-180px) rotateY(-10deg) rotateX(2deg); }
  .mg-card--5 { --rest: translate(calc(-50% + 30vw), calc(-50% - 6vh))  translate3d(0,0,-220px) rotateY(10deg) rotateX(-2deg); }
  .mg-card--6 { --rest: translate(calc(-50% - 6vw),  calc(-50% - 40vh)) translate3d(0,0,-260px) rotateY(-4deg) rotateX(8deg); }
  .mg-card--7 { --rest: translate(calc(-50% + 8vw),  calc(-50% + 40vh)) translate3d(0,0,-300px) rotateY(6deg) rotateX(-7deg); }
  .mg-card--8 { --rest: translate(calc(-50% - 24vw), calc(-50% + 38vh)) translate3d(0,0,-240px) rotateY(-8deg) rotateX(5deg); }
  .mg-card--9 { --rest: translate(calc(-50% + 24vw), calc(-50% - 38vh)) translate3d(0,0,-280px) rotateY(8deg) rotateX(-5deg); }
}


/* ── Fly-out animation: start clustered at centre, spread to resting position ── */

@keyframes mg-spread-out {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.4);
  }
  40% {
    opacity: 1;
  }
  100% {
    opacity: 1;
    transform: var(--rest);
  }
}

/* Per-card animation with staggered delays + ongoing drift */
.mg-card--0 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards, mg-drift-a 18s ease-in-out 1.7s infinite; }
.mg-card--1 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.45s forwards, mg-drift-b 22s ease-in-out 1.85s infinite; }
.mg-card--2 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.6s forwards, mg-drift-c 20s ease-in-out 2.0s infinite; }
.mg-card--3 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.75s forwards, mg-drift-a 24s ease-in-out 2.15s infinite; }
.mg-card--4 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.9s forwards, mg-drift-b 19s ease-in-out 2.3s infinite; }
.mg-card--5 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 1.05s forwards, mg-drift-c 23s ease-in-out 2.45s infinite; }
.mg-card--6 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 1.2s forwards, mg-drift-a 21s ease-in-out 2.6s infinite; }
.mg-card--7 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 1.35s forwards, mg-drift-b 17s ease-in-out 2.75s infinite; }
.mg-card--8 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 1.5s forwards, mg-drift-c 25s ease-in-out 2.9s infinite; }
.mg-card--9 { animation: mg-spread-out 1.4s cubic-bezier(0.16, 1, 0.3, 1) 1.65s forwards, mg-drift-a 20s ease-in-out 3.05s infinite; }

/* Three drift patterns — subtle floating after settling */
@keyframes mg-drift-a {
  0%, 100% { transform: var(--rest); }
  25%      { transform: var(--rest) translate3d(8px, -12px, 15px); }
  50%      { transform: var(--rest) translate3d(-6px, 8px, -10px); }
  75%      { transform: var(--rest) translate3d(10px, 5px, 20px); }
}

@keyframes mg-drift-b {
  0%, 100% { transform: var(--rest); }
  30%      { transform: var(--rest) translate3d(-10px, -8px, -20px); }
  60%      { transform: var(--rest) translate3d(12px, 10px, 15px); }
}

@keyframes mg-drift-c {
  0%, 100% { transform: var(--rest); }
  20%      { transform: var(--rest) translate3d(6px, 10px, -15px); }
  50%      { transform: var(--rest) translate3d(-12px, -6px, 25px); }
  80%      { transform: var(--rest) translate3d(8px, -10px, -10px); }
}


/* ── Focused / zoomed view ── */

.mg-focus {
  position: absolute;
  inset: 0;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: clamp(16px, 3vmin, 40px);
  box-sizing: border-box;

  background: rgba(2, 1, 8, 0.5);
  animation: mg-focus-in 0.4s ease-out forwards;
}

@keyframes mg-focus-in {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

/* The framed image */
.mg-focus__frame {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  max-width: calc(100vw - clamp(32px, 6vmin, 80px));
  max-height: calc(100vh - clamp(32px, 6vmin, 80px));
  max-height: calc(100dvh - clamp(32px, 6vmin, 80px));

  background: rgba(32, 18, 10, 0.55);
  border: 1px solid rgba(210, 170, 110, 0.25);
  border-radius: 14px;
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.40);
  backdrop-filter: blur(2px);
  overflow: hidden;

  animation: mg-frame-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes mg-frame-in {
  0%   { transform: scale(0.6); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

/* Close button */
.mg-focus__close {
  position: absolute;
  top: clamp(4px, 1vmin, 10px);
  right: clamp(4px, 1vmin, 10px);
  width: clamp(28px, 4vmin, 40px);
  height: clamp(28px, 4vmin, 40px);

  display: flex;
  align-items: center;
  justify-content: center;

  background: rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(210, 170, 110, 0.3);
  border-radius: 50%;
  color: rgba(230, 210, 180, 0.9);
  font-size: clamp(16px, 2.5vmin, 24px);
  line-height: 1;
  cursor: pointer;
  padding: 0;

  transition: background 0.2s, border-color 0.2s;
}

.mg-focus__close:hover {
  background: rgba(0, 0, 0, 0.7);
  border-color: rgba(210, 170, 110, 0.5);
}
